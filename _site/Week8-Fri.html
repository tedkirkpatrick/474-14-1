<!DOCTYPE html>
<html lang="en">
	  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <!--<meta http-equiv="X-UA-Compatible" content="IE=edge">-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Web site for CMPT 474, Spring 2015">
    <meta name="author" content="A. E. Kirkpatrick">
    <link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon" />

    <title>Week 8, Friday (March 7, 2014)&mdash;Two eventually consistent algorithms</title>

    <!-- Bootstrap core CSS -->
    <link href="dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="http://getbootstrap.com/examples/navbar-static-top/navbar-static-top.css" rel="stylesheet">
    <link href="course.css" rel="stylesheet">
    <link href="dist/css/jquery.dataTables.css" rel="stylesheet">
    <link href="dist/css/jquery.dataTables_themeroller.css" rel="stylesheet">
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->
  </head>


	<body>
		<div class="container">
			<div class="navbar navbar-default" role="navigation">
	<div class="container">
		<div class="navbar-header">
			<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#collapse-id">
				<span class="sr-only">Toggle navigation</span>
		  		<span class="icon-bar"></span>
		  		<span class="icon-bar"></span>
		  		<span class="icon-bar"></span>
		  	</button>
			<a class="navbar-brand " href="index.html">CMPT 474</a>
		</div>
		<div class="collapse navbar-collapse" id="collapse-id">
			<ul class="nav navbar-nav">
				<li class="active"><a href="schedule.html">Schedule</a></li>
				<li ><a href="outcomes.html">Learning outcomes</a></li>
				<li ><a href="challenges.html">Challenges</a></li>
				<li ><a href="design.html">Design principles</a></li>
				<li ><a href="readings.html">Readings</a></li>
				
				<li ><a href="aws.html">AWS details</a></li>
				
		      </ul>
		</div>
	</div>
</div>

		</div>

		<div class="container ">
			<h1>Week 8, Friday (March 7, 2014)&mdash;Two eventually consistent algorithms</h1>
		        
			<h2 id="some-basic-issues-smallfrom-distributed-databaseshttphighlyscalablewordpresscom20120918distributed-algorithms-in-nosql-databasessmall">Some basic issues <small>From <a href="http://highlyscalable.wordpress.com/2012/09/18/distributed-algorithms-in-nosql-databases/">Distributed Databases</a></small></h2>

<p><strong>Eventually consistent:</strong> Vague commitment that system will <em>eventually</em>
  converge to a consensus, if you wait long enough after the &#8220;last update&#8221;. </p>

<ul>
  <li>No Guarantee <em>what</em> value system will converge to</li>
  <li>Simply means &#8220;not strongly consistent&#8221;</li>
  <li>Different degrees and kinds</li>
</ul>

<h3 id="handling-conflicting-writes">Handling conflicting writes</h3>

<p><strong>Conflict detection:</strong> Detect that a conflict has occurred and either</p>

<ul>
  <li>Pick a tie-breaker by algorithm</li>
  <li>Return both values to the application to resolve (Used in <a href="http://basho.com/assets/RelationaltoRiak.pdf">Riak</a>)</li>
</ul>

<p><strong>Conflict prevention:</strong> Don&#8217;t allow conflicting writes</p>

<ul>
  <li>Slows system down due to communication costs</li>
  <li>Necessarily intolerant of network partitions</li>
</ul>

<h2 id="anti-entropy-via-gossip">Anti-entropy via gossip</h2>

<p>Algorithm that is:</p>

<ul>
  <li>Scalable</li>
  <li>Partition-tolerante</li>
  <li>Weakly consistent
    <ul>
      <li>Not even guaranteed to converge to <em>latest</em> value</li>
    </ul>
  </li>
</ul>

<h2 id="read-quorum-write-quorum">Read Quorum/ Write Quorum</h2>

<p>Given N replications</p>

<ul>
  <li>Write W versions synchronously</li>
  <li>Read R replicats</li>
</ul>

<p>If R + W &gt; N</p>

<ul>
  <li>Ensures read-after-write consistency for a given client</li>
  <li>But different readers can get different values (during update)</li>
  <li>If W &gt; N/2, can detect conflicts</li>
  <li>Not tolerant of network partitions
    <ul>
      <li>Can be modified to achieve that</li>
    </ul>
  </li>
</ul>

<h2 id="guide-to-reading-for-next-class">Guide to reading for next class</h2>

<p>Read
<a href="http://highlyscalable.wordpress.com/2012/09/18/distributed-algorithms-in-nosql-databases/">Distributed Algorithms in NoSQL Databases</a>
<strong>section &#8220;Sharding and Replication in Dynamic Environments&#8221;</strong>. Stop
just before &#8220;Multi-Attribute Sharding&#8221;.</p>

<p>In our discussion of availability/partition-tolerance tradeoffs so far
(and in the <a href="http://innovate.cs.surrey.sfu.ca/assignments/the-tea-emporium">Tea Emporium</a>
assignment as well), we have assumed a fixed number of replications of
our data. But what do you do if you need to increase the number of
replications to meet higher demand or reduce replications when demand
drops? This section considers the challenges that arise when you
change your number of replications as your application runs.
Nearly all real applications do dynamic replica management, so these techniques
are necessary to building real apps.</p>

		</div> <!-- /container -->

		    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://code.jquery.com/jquery-1.10.2.min.js"></script>
    <script src="dist/js/jquery.dataTables.min.js"></script>
    <script src="dist/js/bootstrap.min.js"></script>
    
  

	</body>
</html>